\begin{lstlisting}[language=C++, caption={Excepciones 1}]
#include <cstdio>

void c()
{


    // Busca donde se boto la excepcion en el exception handler
    // y si no hay busca en la funcion donde esta la exeption 
    // y si nohay ningun manejador entonces el programa termina

    throw 214U;
    // int* q = nullptr;
    // *q += 18;
    // int x = 6, y = 0;
    // int z = x / y;
    // Segmentation fault no se puede agarrar
    // Tampoco errores logicos 
}

void b()
{
    puts("Starting b");
    c();
    puts("Ending b");
}

void a()
{
    puts("Stating a");
    b();
    puts("Ending a");
}


int main()
{
    try
    {
        a();
        puts("Happy bye");
    }
    catch(const char* e)
    {
        printf("Error: %s\n", e);
    }
    catch(int e)
    {
        printf("codigo: %d\n", e);
    }
    puts("Bye anyway");

}
\end{lstlisting}

\begin{lstlisting}[language=C++, caption={Excepciones 2}]
#include <cstdio>
#include <string>
#include <stdexcept>

struct Ex
{
    int code;
    std::string msg;

    ~Ex()
    {
        puts("Exception bye");
    }

};

class Ex2 : public std::exception
{
    int code;
    std::string msg;
    public:
    Ex2(int c, const std::string& m)
    :code{c}, msg{m}
    {}
    const char* what() const noexcept override
    {
        return msg.data();
    }

};

void s()
{
    puts("A");
    throw Ex2{14, "File not found"};
    puts("B");
}

void z()
{
        s();
}

int main()
{
    try
    {
        z();
    }
    // siempre enviar referencias constantes
    catch(const std::exception& e)
    {
        puts(e.what());
    }
    
}

// std::exception es la base de las exepciones  
\end{lstlisting}

\begin{lstlisting}[language=C++, caption={Excepciones 3}]
#include <cstdio>

struct Int
{
    int n;
    ~Int()
    {
        puts("Bye int");
    }
};

struct W
{
    Int* n;
    ~W()
    {
        delete n;
    }
};

void m()
{
    W w{new Int{64}};
    printf("%d\n", w.n->n);
    throw true;
}

int main()
{
    try
    {
        m();
    }
    catch(...)
    {
        puts("error");
    }
    
}
\end{lstlisting}